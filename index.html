<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>XCard â€“ Modern UI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>

:root {
  --primary: #2563eb;
  --primary-dark: #1e40af;
  --bg: #f8fafc;
  --panel: #ffffff;
  --text: #0f172a;
  --muted: #64748b;
  --border: #e2e8f0;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* ================= HEADER ================= */

header {
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  padding: 25px;
  text-align: center;
}

header h1 {
  margin: 0;
  font-size: 28px;
}

header p {
  margin: 6px 0 0;
  opacity: 0.9;
}

/* ================= LAYOUT ================= */

.container {
  max-width: 1300px;
  margin: auto;
  padding: 20px;
}

.panel {
  background: var(--panel);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 18px;

  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;

  border: 1px solid var(--border);
  box-shadow: 0 4px 10px rgba(0,0,0,0.04);
}

.panel h3 {
  width: 100%;
  margin: 0 0 6px;
  font-size: 15px;
  color: var(--primary);
}

/* ================= FORM ================= */

input, textarea, button {
  font-family: inherit;
}

input, textarea {
  padding: 7px 9px;
  border-radius: 6px;
  border: 1px solid var(--border);
  font-size: 13px;
}

textarea {
  resize: vertical;
  min-height: 60px;
}

input:focus, textarea:focus {
  outline: none;
  border-color: var(--primary);
}

/* ================= BUTTONS ================= */

button {
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 6px;
  padding: 7px 14px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

button:hover {
  background: var(--primary-dark);
}

button.secondary {
  background: #e2e8f0;
  color: var(--text);
}

button.secondary:hover {
  background: #cbd5f5;
}

button.danger {
  background: #dc2626;
}

button.danger:hover {
  background: #b91c1c;
}

/* ================= GRID ================= */

.cards-container {
  display: grid;
  gap: 18px;
  justify-items: center;

  max-width: 190mm;
  margin: auto;

  grid-template-columns: repeat(3, 1fr);
}

/* ================= CARD ================= */

.card {
  perspective: 1200px;
  cursor: grab;
}

.card-inner {
  width: 240px;
  height: 240px;
  position: relative;

  transform-style: preserve-3d;
  transition: transform 0.7s cubic-bezier(.4,.2,.2,1);
}

@media screen {
  .card:hover .card-inner {
    transform: rotateY(180deg);
  }
}

.face {
  position: absolute;
  width: 100%;
  height: 100%;

  border-radius: 14px;
  backface-visibility: hidden;

  padding: 18px;

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  text-align: center;

  font-size: 14px;
  font-weight: 600;

  box-shadow: 0 10px 18px rgba(0,0,0,0.08);
}

.card-front {
  background: white;
}

.card-back {
  background: linear-gradient(135deg, #0f172a, #1e293b);
  color: white;
  transform: rotateY(180deg);
}

.number {
  position: absolute;
  top: 8px;
  left: 8px;

  background: var(--primary);
  color: white;

  font-size: 11px;
  padding: 2px 7px;
  border-radius: 6px;
}

/* ================= PRINT ================= */

@media print {

  @page {
    size: A4 portrait;
    margin: 8mm;
  }

  header, .panel {
    display: none;
  }

  body {
    background: white;
  }

  .card-inner {
    transform: none !important;
  }

  .face {
    box-shadow: none;
  }
}

.front-only .card-back { display: none; }
.back-only .card-front { display: none; }

@media print {
  .back-only .card-back { transform: none !important; }
}

</style>
</head>

<body>

<header>
  <h1>XCard</h1>
  <p>Modern Flashcard Generator for Interview Preparation</p>
</header>

<div class="container">

<!-- Layout -->
<div class="panel">
  <h3>Layout Settings</h3>

  Columns <input type="number" id="cols" value="3" min="1" max="6">
  Size <input type="number" id="size" value="240">
  Gap <input type="number" id="gap" value="10">

  <button onclick="autoFit()">Auto Fit</button>
  <button onclick="applySettings()">Apply</button>

  <button class="secondary" onclick="showFront()">Front</button>
  <button class="secondary" onclick="showBack()">Back</button>
  <button class="secondary" onclick="showBoth()">Both</button>

  <button onclick="window.print()">Print</button>
</div>

<!-- Add Card -->
<div class="panel">
  <h3>Add Card</h3>

  <textarea id="frontText" placeholder="Front"></textarea>
  <textarea id="backText" placeholder="Back"></textarea>

  <button onclick="addCard()">Add</button>
</div>

<!-- Import -->
<div class="panel">
  <h3>Import Cards</h3>

  <textarea id="bulkInput" placeholder="Question|Answer"></textarea>

  <button onclick="importBulk()">Bulk</button>

  CSV <input type="file" accept=".csv" onchange="loadCSV(event)">
  JSON <input type="file" accept=".json" onchange="loadJSON(event)">
</div>

<!-- Preset -->
<div class="panel">
  <h3>Presets</h3>

  <input id="presetName" placeholder="Preset name">

  <button onclick="savePreset()">Save</button>
  <button onclick="loadPreset()">Load</button>

  <button class="danger" onclick="clearAll()">Clear</button>
</div>


<!-- Cards -->
<div id="cardsContainer" class="cards-container"></div>

</div>

<script>

let cardsData = [
  { front: "What is DI?", back: "Dependency Injection" },
  { front: "What is REST?", back: "API Architecture" }
];

/* ================= RENDER ================= */

function renderCards() {

  const box = document.getElementById("cardsContainer");
  box.innerHTML = "";

  cardsData.forEach((c, i) => {

    const d = document.createElement("div");
    d.className = "card";
    d.draggable = true;
    d.dataset.index = i;

    d.innerHTML = `
      <div class="card-inner">

        <div class="face card-front">
          <div class="number">${i + 1}</div>
          ${c.front}
        </div>

        <div class="face card-back">
          <div class="number">${i + 1}</div>
          ${c.back}
        </div>

      </div>`;

    addDrag(d);

    box.appendChild(d);

  });

  applySettings();
}

/* ================= SETTINGS ================= */

function applySettings() {

  const cols = val("cols");
  const size = val("size");
  const gap = val("gap");

  const grid = el("cardsContainer");

  grid.style.gridTemplateColumns = `repeat(${cols},1fr)`;
  grid.style.gap = gap + "mm";

  document.querySelectorAll(".card-inner")
    .forEach(c => {
      c.style.width = size + "px";
      c.style.height = size + "px";
    });
}

function autoFit() {

  set("cols", 3);
  set("size", 220);
  set("gap", 8);

  applySettings();
}

/* ================= ADD ================= */

function addCard() {

  const f = el("frontText").value.trim();
  const b = el("backText").value.trim();

  if (!f || !b) return alert("Fill both fields");

  cardsData.push({ front: f, back: b });

  el("frontText").value = "";
  el("backText").value = "";

  renderCards();
}

/* ================= BULK ================= */

function importBulk() {

  const t = el("bulkInput").value.trim();
  if (!t) return;

  t.split("\n").forEach(l => {

    if (!l.includes("|")) return;

    const p = l.split("|");

    cardsData.push({
      front: p[0].trim(),
      back: p.slice(1).join("|").trim()
    });
  });

  el("bulkInput").value = "";

  renderCards();
}

/* ================= CSV ================= */

function loadCSV(e) {

  const file = e.target.files[0];
  if (!file) return;

  const r = new FileReader();

  r.onload = x => {

    x.target.result
      .split("\n")
      .slice(1)
      .forEach(l => {

        const [f, b] = l.split(",");

        if (f && b)
          cardsData.push({ front: f.trim(), back: b.trim() });
      });

    renderCards();
  };

  r.readAsText(file);
}

/* ================= JSON ================= */

function loadJSON(e) {

  const file = e.target.files[0];
  if (!file) return;

  const r = new FileReader();

  r.onload = x => {

    try {

      const data = JSON.parse(x.target.result);

      if (!Array.isArray(data)) throw "Invalid";

      data.forEach(i => {

        if (i.front && i.back)
          cardsData.push({ front: i.front, back: i.back });
      });

      renderCards();

    } catch {
      alert("Invalid JSON");
    }
  };

  r.readAsText(file);
}

/* ================= DRAG ================= */

let dragIndex = null;

function addDrag(elm) {

  elm.addEventListener("dragstart", () => {
    dragIndex = +elm.dataset.index;
    elm.style.opacity = "0.4";
  });

  elm.addEventListener("dragend", () => {
    elm.style.opacity = "1";
  });

  elm.addEventListener("dragover", e => e.preventDefault());

  elm.addEventListener("drop", () => {

    const target = +elm.dataset.index;

    const temp = cardsData[dragIndex];

    cardsData.splice(dragIndex, 1);
    cardsData.splice(target, 0, temp);

    renderCards();
  });
}

/* ================= PRESET ================= */

function savePreset() {

  const name = el("presetName").value.trim();
  if (!name) return alert("Enter name");

  const data = {
    cards: cardsData,
    settings: {
      cols: val("cols"),
      size: val("size"),
      gap: val("gap")
    }
  };

  localStorage.setItem(name, JSON.stringify(data));

  alert("Saved");
}

function loadPreset() {

  const name = el("presetName").value.trim();

  const d = localStorage.getItem(name);
  if (!d) return alert("Not found");

  const obj = JSON.parse(d);

  cardsData = obj.cards;

  set("cols", obj.settings.cols);
  set("size", obj.settings.size);
  set("gap", obj.settings.gap);

  renderCards();
}

/* ================= UTIL ================= */

function clearAll() {

  if (!confirm("Clear all cards?")) return;

  cardsData = [];
  renderCards();
}

function showFront() { document.body.className = "front-only"; }
function showBack() { document.body.className = "back-only"; }
function showBoth() { document.body.className = ""; }

const el = id => document.getElementById(id);
const val = id => el(id).value;
const set = (id, v) => el(id).value = v;

/* ================= INIT ================= */

renderCards();

</script>

</body>
</html>

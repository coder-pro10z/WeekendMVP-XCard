<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interview Card Generator - Ultimate</title>

<style>

/* ================= BASE ================= */

* { box-sizing: border-box; }

body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  margin: 0;
  padding: 15px;
}

h1 { text-align: center; }

/* ================= PANELS ================= */

.panel {
  background: #fff;
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 12px;

  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;

  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.panel input,
.panel textarea,
.panel button {
  font-size: 13px;
  padding: 5px;
}

textarea {
  width: 250px;
  height: 65px;
}

/* ================= GRID ================= */

.cards-container {
  display: grid;
  justify-items: center;

  max-width: 190mm;
  margin: auto;

  gap: 10mm;
  grid-template-columns: repeat(3, 1fr);
}

/* ================= CARD ================= */

.card {
  perspective: 1000px;
  cursor: grab;
}

.card.dragging {
  opacity: 0.4;
}

.card-inner {
  position: relative;
  width: 240px;
  height: 240px;

  transform-style: preserve-3d;
  transition: transform 0.6s;
}

@media screen {
  .card:hover .card-inner {
    transform: rotateY(180deg);
  }
}

.face {
  position: absolute;
  width: 100%;
  height: 100%;

  border-radius: 8px;
  backface-visibility: hidden;

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  padding: 12px;
  text-align: center;

  box-shadow: 0 3px 6px rgba(0,0,0,0.2);

  font-weight: 600;
}

.card-front {
  background: #fafafa;
}

.card-back {
  background: #222;
  color: white;
  transform: rotateY(180deg);
}

/* Number badge */

.number {
  position: absolute;
  top: 5px;
  left: 5px;

  background: black;
  color: white;

  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
}

/* ================= PRINT ================= */

@media print {

  @page {
    size: A4 portrait;
    margin: 8mm;
  }

  body {
    background: white;
    margin: 0;
    padding: 0;
  }

  .panel { display: none; }

  .card-inner { transform: none !important; }

  .cards-container {
    width: 100%;
    max-width: 100%;
  }

  .face { box-shadow: none; }

  .card {
    break-inside: avoid;
    page-break-inside: avoid;
  }
}

/* Print modes */

.front-only .card-back { display: none; }
.back-only .card-front { display: none; }

@media print {
  .back-only .card-back {
    transform: none !important;
  }
}

</style>
</head>

<body>

<h1>Interview Card Generator â€“ Ultimate</h1>

<!-- ================= LAYOUT ================= -->

<div class="panel">

Columns
<input type="number" id="cols" value="3" min="1" max="6">

Size(px)
<input type="number" id="size" value="240">

Gap(mm)
<input type="number" id="gap" value="10">

<button onclick="autoFit()">Auto Fit</button>
<button onclick="applySettings()">Apply</button>

<button onclick="showFront()">Front</button>
<button onclick="showBack()">Back</button>
<button onclick="showBoth()">Both</button>

<button onclick="window.print()">Print</button>

</div>

<!-- ================= ADD ================= -->

<div class="panel">

Front
<textarea id="frontText"></textarea>

Back
<textarea id="backText"></textarea>

<button onclick="addCard()">Add</button>

</div>

<!-- ================= IMPORT ================= -->

<div class="panel">

Bulk (A|B)
<textarea id="bulkInput"></textarea>

<button onclick="importBulk()">Bulk</button>

CSV
<input type="file" accept=".csv" onchange="loadCSV(event)">

JSON
<input type="file" accept=".json" onchange="loadJSON(event)">

</div>

<!-- ================= PRESET ================= -->

<div class="panel">

Preset
<input id="presetName">

<button onclick="savePreset()">Save</button>
<button onclick="loadPreset()">Load</button>

<button onclick="clearAll()">Clear</button>

</div>

<!-- ================= CARDS ================= -->

<div id="cardsContainer" class="cards-container"></div>


<script>

/* ================= DATA ================= */

let cardsData = [
  { front: "What is DI?", back: "Dependency Injection reduces coupling." },
  { front: "What is REST?", back: "API architectural style." }
];


/* ================= RENDER ================= */

function renderCards(){

  const box = document.getElementById("cardsContainer");
  box.innerHTML = "";

  cardsData.forEach((c,i)=>{

    const d = document.createElement("div");

    d.className = "card";
    d.draggable = true;
    d.dataset.index = i;

    d.innerHTML = `

      <div class="card-inner">

        <div class="face card-front">

          <div class="number">${i+1}</div>
          ${c.front}

        </div>

        <div class="face card-back">

          <div class="number">${i+1}</div>
          ${c.back}

        </div>

      </div>
    `;

    addDragEvents(d);

    box.appendChild(d);

  });

  applySettings();
}


/* ================= SETTINGS ================= */

function applySettings(){

  const cols = colsInput().value;
  const size = sizeInput().value;
  const gap  = gapInput().value;

  const grid = document.getElementById("cardsContainer");

  grid.style.gridTemplateColumns =
    `repeat(${cols},1fr)`;

  grid.style.gap = gap + "mm";

  document.querySelectorAll(".card-inner")
  .forEach(c=>{
    c.style.width  = size + "px";
    c.style.height = size + "px";
  });
}


/* ================= AUTO FIT ================= */

function autoFit(){

  colsInput().value = 3;
  sizeInput().value = 220;
  gapInput().value  = 8;

  applySettings();
}


/* ================= ADD ================= */

function addCard(){

  const f = front().value.trim();
  const b = back().value.trim();

  if(!f || !b) return alert("Fill both fields");

  cardsData.push({ front:f, back:b });

  front().value = "";
  back().value  = "";

  renderCards();
}


/* ================= BULK ================= */

function importBulk(){

  const t = bulk().value.trim();
  if(!t) return;

  t.split("\n").forEach(l=>{

    if(!l.includes("|")) return;

    const p = l.split("|");

    cardsData.push({
      front: p[0].trim(),
      back : p.slice(1).join("|").trim()
    });
  });

  bulk().value = "";

  renderCards();
}


/* ================= CSV ================= */

function loadCSV(e){

  const file = e.target.files[0];
  if(!file) return;

  const r = new FileReader();

  r.onload = x=>{

    x.target.result
    .split("\n")
    .slice(1)
    .forEach(l=>{

      const [f,b] = l.split(",");

      if(f && b)
        cardsData.push({
          front:f.trim(),
          back:b.trim()
        });
    });

    renderCards();
  };

  r.readAsText(file);
}


/* ================= JSON ================= */

function loadJSON(event){

  const file = event.target.files[0];
  if(!file) return;

  const reader = new FileReader();

  reader.onload = e=>{

    try{

      const data = JSON.parse(e.target.result);

      if(!Array.isArray(data))
        return alert("Invalid JSON format");

      data.forEach(i=>{

        if(i.front && i.back){

          cardsData.push({
            front:i.front.trim(),
            back:i.back.trim()
          });
        }
      });

      renderCards();

    }
    catch{
      alert("Invalid JSON file");
    }
  };

  reader.readAsText(file);
}


/* ================= DRAG ================= */

let dragIndex = null;

function addDragEvents(el){

  el.addEventListener("dragstart",()=>{

    dragIndex = +el.dataset.index;
    el.classList.add("dragging");

  });

  el.addEventListener("dragend",()=>{

    el.classList.remove("dragging");

  });

  el.addEventListener("dragover",e=>{

    e.preventDefault();

  });

  el.addEventListener("drop",()=>{

    const target = +el.dataset.index;

    const temp = cardsData[dragIndex];

    cardsData.splice(dragIndex,1);
    cardsData.splice(target,0,temp);

    renderCards();

  });
}


/* ================= PRESET ================= */

function savePreset(){

  const name = preset().value.trim();

  if(!name) return alert("Enter name");

  const data = {

    cards: cardsData,

    settings:{
      cols: colsInput().value,
      size: sizeInput().value,
      gap : gapInput().value
    }
  };

  localStorage.setItem(name,JSON.stringify(data));

  alert("Saved");
}

function loadPreset(){

  const name = preset().value.trim();

  const d = localStorage.getItem(name);

  if(!d) return alert("Not found");

  const obj = JSON.parse(d);

  cardsData = obj.cards;

  colsInput().value = obj.settings.cols;
  sizeInput().value = obj.settings.size;
  gapInput().value  = obj.settings.gap;

  renderCards();
}


/* ================= UTIL ================= */

function clearAll(){

  if(!confirm("Clear all cards?")) return;

  cardsData = [];
  renderCards();
}

function showFront(){ document.body.className="front-only"; }
function showBack(){  document.body.className="back-only"; }
function showBoth(){  document.body.className=""; }

const front = ()=>document.getElementById("frontText");
const back  = ()=>document.getElementById("backText");
const bulk  = ()=>document.getElementById("bulkInput");
const preset= ()=>document.getElementById("presetName");

const colsInput = ()=>document.getElementById("cols");
const sizeInput = ()=>document.getElementById("size");
const gapInput  = ()=>document.getElementById("gap");


/* ================= INIT ================= */

renderCards();

</script>

</body>
</html>
